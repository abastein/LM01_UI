<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="LM01_UI.Views.RecipeListView"
             xmlns:vm="clr-namespace:LM01_UI.ViewModels"
			 xmlns:local="clr-namespace:LM01_UI"
             xmlns:m="clr-namespace:LM01_UI.Models"
             x:DataType="vm:RecipeListViewModel"
             Background="White"
             BorderBrush="DarkGreen"
             BorderThickness="2"
             CornerRadius="25,25,25,25"
             Margin="0,20,0,0">

	<UserControl.Styles>
		<StyleInclude Source="avares://LM01_UI/Styles/SharedStyles.axaml"/>
	</UserControl.Styles>

	<UserControl.Resources>
		<local:BoolToBrushConverter x:Key="ActiveRowBrushConverter"
									TrueBrush="#007435"
									FalseBrush="Transparent"/>
	</UserControl.Resources>

	<Grid RowDefinitions="Auto,*,Auto" Margin="10">
		<TextBlock Grid.Row="0"
				   Text="Urejanje programov"
				   FontSize="30"
				   FontWeight="Bold"
				   Foreground="Black"
				   Margin="10,5,0,20"/>

		<!-- DataGrid -->
		<DataGrid Grid.Row="1"
						ItemsSource="{Binding Recipes}"
						SelectedItem="{Binding SelectedRecipe}"
						SelectionMode="Single"
						IsReadOnly="True">
			<DataGrid.Styles>
				<Style Selector="Border.row-bg" x:DataType="m:Recipe">
					<Setter Property="Background"
							Value="{Binding IsActive, Converter={StaticResource ActiveRowBrushConverter}}"/>
				</Style>
			</DataGrid.Styles>
			<DataGrid.Columns>
				<DataGridTemplateColumn Header="ID" Width="60">
					<DataTemplate>
						<Border Classes="row-bg"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Stretch">
							<TextBlock Classes="row-text"
									   Text="{Binding Id}"
									   VerticalAlignment="Center"
									   Margin="5,0"/>
						</Border>
					</DataTemplate>
				</DataGridTemplateColumn>
				<DataGridTemplateColumn Header="Ime" Width="*">
					<DataTemplate>
						<Border Classes="row-bg"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Stretch">
							<TextBlock Classes="row-text"
									   Text="{Binding Name}"
									   VerticalAlignment="Center"
									   Margin="5,0"/>
						</Border>
					</DataTemplate>
				</DataGridTemplateColumn>
				<DataGridTemplateColumn Header="Opis" Width="2*">
					<DataTemplate>
						<Border Classes="row-bg"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Stretch">
							<TextBlock Classes="row-text"
									   Text="{Binding Description}"
									   VerticalAlignment="Center"
									   Margin="5,0"/>
						</Border>
					</DataTemplate>
				</DataGridTemplateColumn>
			</DataGrid.Columns>
		</DataGrid>

		<!-- Actions -->
		<StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10" HorizontalAlignment="Right" Margin="20">
			<Button Content="Dodaj Novo" Command="{Binding AddNewRecipeCommand}"/>
			<Button Content="Uredi Izbrano" Command="{Binding EditRecipeCommand}"/>
			<Button Content="IzbriÅ¡i Izbrano"
					Command="{Binding DeleteRecipeCommand}"
					IsEnabled="{Binding CanDeleteSelectedRecipe}"/>
		</StackPanel>
	</Grid>
</UserControl>